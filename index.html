<!DOCTYPE html>
<html lang="en">
<head>
<title>R4C demo</title>
  <meta charset="utf-8">
  <!-- Include the CesiumJS JavaScript and CSS files -->
  <script src="Cesium/Cesium.js"></script>
  <script type="text/javascript" src="scripts/geoapitools.js"></script>
  <script type="text/javascript" src="scripts/buildings.js"></script>
  <script type="text/javascript" src="scripts/natureareas.js"></script>
  <script type="text/javascript" src="scripts/sliderevents.js"></script>
  <script type="text/javascript" src="scripts/urbanheat.js"></script>
  <script type="text/javascript" src="scripts/featurepicker.js"></script>
  <script src="localforage/dist/localforage.js"></script>
  <script src="plotly-2.12.1.min.js"></script>
  <link href="Cesium/Widgets/widgets.css" rel="stylesheet">
  <link href="DemoApp.css" rel="stylesheet">
</head>
<body>
<div id="canvasScalerDiv">
  <div id="cesiumContainer"></div>
  <div id="UIContainer">
  <p class="uiButton" onClick="reset()" style="color: red; float:right;">Reset</p>
 
  <!-- showPlotSwitch-->
<label class="switch">
  <input type="checkbox" id="showPlotToggle" value="showPlot" checked>
  <span class="slider round"></span>
</label>
<label for="showPlotToggle" class="label">Display plot</label>

  <!-- showPrintSwitch-->
<label class="switch">
  <input type="checkbox" id="printToggle" value="print" checked>
  <span class="slider round"></span>
</label>
<label for="printToggle" class="label">Object details</label>

  <!-- showNatureSwitch-->
<label class="switch">
	<input type="checkbox" id="showNatureToggle" value="showNature" >
	<span class="slider round"></span>
</label>
<label for="showNatureToggle" class="label">Show nature areas</label>

  <!-- hideNonSoteSwitch-->
  <label class="switch">
	<input type="checkbox" id="hideNonSoteToggle" value="hideNonSote" >
	<span class="slider round"></span>
</label>
<label for="hideNonSote" class="label">Hide non sote buildings</label>

  </div>
  <div id="plotContainer">
  
  </div>
  
	<div id="printContainer">
  <i>Please click on a postcode area to load building and lot polygons from the WFS server...</i>
  </div>
  	
  	<!-- Add Logo -->
	<img src="fvh-1_musta.png" id="logo" alt="Forum Virium Helsinki" />
	</div>
  <script>
  
  	// UI related global variables...
  	var showPlot = true;
	var showNature = false;
  	var print = true; //show object details..
	var postalcode = null;
    
	// OS version, operating without Cesium Ion services...
    Cesium.Ion.defaultAccessToken = null;

    // Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.
    const viewer = new Cesium.Viewer('cesiumContainer', {
    	terrainProvider : new Cesium.EllipsoidTerrainProvider(),
		imageryProvider: new Cesium.WebMapTileServiceImageryProvider({
			url : ' https://avoin-karttakuva.maanmittauslaitos.fi/avoin/wmts/?api-key=97cd06ee-393a-4e7f-bd92-7ca33172df00',
			layer : 'taustakartta',
			style : 'default',
			tileMatrixSetID : 'WGS84_Pseudo-Mercator'
		}),
    	animation: false,
        fullscreenButton: false,
        geocoder: false,
        shadows: false,
        navigationHelpButton: false,
        timeline: false,
        sceneModePicker: false,
        baseLayerPicker: false,
        infoBox: false
    });    
  
    // Fly the camera to Helsinki at the given longitude, latitude, and height.
    viewer.camera.flyTo({
      destination : Cesium.Cartesian3.fromDegrees(24.941745, 60.165464, 35000), 
      orientation : {
        heading : Cesium.Math.toRadians(0.0),
        pitch : Cesium.Math.toRadians(-85.0),
      }
    });
    
    // Load post code zones & energy data availability tags
	loadPostCodeZones(0.2);
    
	//Experimental scripts for playing around with the objects, and retrieving their information...
	document.getElementById("cesiumContainer").addEventListener("click", function() { processClick( viewer, event ) });
	//Attaching UI events...
	addEventListener('input', ( event ) => { sliderEvents( event ) } );

  </script>
</body>
</html>